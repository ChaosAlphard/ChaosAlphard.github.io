<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="VHD/VHDXç®€ä»‹ ä»€ä¹ˆæ˜¯VHD VHD æ˜¯Microsoft Virtual Hard Disk formatï¼ˆå¾®è½¯è™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼‰çš„ç®€ç§°ã€‚å¯ä»¥ç”±Windows Vista/7/8/10ï¼ŒWindows Server 2008R2 ç­‰ç³»ç»Ÿåˆ›å»ºã€‚
ä¸€ä¸ªVHDæ–‡ä»¶å¯ä»¥è¢«è™šæ‹Ÿä¸ºä¸€å—ç¡¬ç›˜ï¼Œå¹¶ä¸”å¯ä»¥åƒæ“ä½œä¸€å—ç¡¬ç›˜ä¸€æ ·æ“ä½œVHDæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šè¯»å–ã€å†™å…¥ã€åˆ›å»ºåˆ†åŒºã€æ ¼å¼åŒ–ç­‰ç­‰ã€‚
ä»€ä¹ˆæ˜¯VHDX éšç€è™šæ‹Ÿç¯å¢ƒçš„ä¼ä¸šå·¥ä½œè´Ÿè·çš„å¢åŠ ä»¥åŠæ€§èƒ½è¦æ±‚çš„æé«˜ï¼Œè™šæ‹Ÿç¡¬ç›˜ (VHD) æ ¼å¼éœ€è¦é€‚åº”è¿™äº›å˜åŒ–ã€‚å› æ­¤ï¼ŒWindows Server 2012 ä¸­çš„ Hyper-V å¼•å…¥äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„VHDæ ¼å¼ï¼Œç§°ä¸ºVHDXã€‚
ä¸æ—§çš„VHDæ ¼å¼ç›¸æ¯”ï¼ŒVHDXå…·æœ‰æ›´å¤§çš„å­˜å‚¨å®¹é‡ã€‚å®ƒä¼˜åŒ–äº†åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜çš„ç»“æ„å¯¹é½æ–¹å¼ï¼Œä»¥é˜²æ­¢åœ¨æ–°çš„å¤§å‹æ‰‡åŒºç‰©ç†ç£ç›˜ä¸Šæ€§èƒ½é™çº§ã€‚åŒæ—¶è¿˜èƒ½åœ¨ç”µæºæ•…éšœæœŸé—´æä¾›æ•°æ®æŸåä¿æŠ¤ã€‚
VHDXæ ¼å¼çš„ä¸»è¦æ–°åŠŸèƒ½å¦‚ä¸‹ï¼š
 æ”¯æŒçš„è™šæ‹Ÿç¡¬ç›˜çš„å­˜å‚¨å®¹é‡é«˜è¾¾ 64 TBã€‚ é€šè¿‡è®°å½•å¯¹VHDXå…ƒæ•°æ®ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥åœ¨ç”µæºå‘ç”Ÿæ•…éšœæ—¶ä¿æŠ¤æ•°æ®ä¸ä¼šè¢«æŸåã€‚ æ”¹è¿›äº†è™šæ‹Ÿç¡¬ç›˜æ ¼å¼çš„å¯¹é½æ–¹å¼ï¼Œå¯åœ¨å¤§å‹æ‰‡åŒºç£ç›˜ä¸Šæ›´å¥½åœ°å·¥ä½œã€‚  VHDX æ ¼å¼è¿˜æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
 åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜æœ‰è¾ƒå¤§çš„æ•°æ®å—å¤§å°ï¼Œå¯è®©è¿™äº›ç£ç›˜æ»¡è¶³å·¥ä½œè´Ÿè·çš„éœ€æ±‚ã€‚ æ‹¥æœ‰4KBçš„é€»è¾‘æ‰‡åŒºï¼Œå¯ä»¥åœ¨ä¸º4KBæ‰‡åŒºè®¾è®¡çš„åº”ç”¨ç¨‹åºå’Œä½œè´Ÿè·ä½¿ç”¨è¯¥ç£ç›˜æ—¶æä¾›è¾ƒé«˜çš„æ€§èƒ½ã€‚ èƒ½å¤Ÿå­˜å‚¨æœ‰å…³ç”¨æˆ·å¯èƒ½æƒ³è®°å½•çš„æ–‡ä»¶çš„è‡ªå®šä¹‰å…ƒæ•°æ®ï¼Œå¦‚æ“ä½œç³»ç»Ÿç‰ˆæœ¬æˆ–åº”ç”¨çš„ä¿®è¡¥ç¨‹åºã€‚ é«˜æ•ˆåœ°è¡¨ç¤ºæ•°æ®ï¼ˆä¹Ÿç§°ä¸ºâ€œå‰ªè£â€ï¼‰ï¼Œä½¿æ–‡ä»¶å¤§å°æ›´å°å¹¶ä¸”å…è®¸åŸºç¡€ç‰©ç†å­˜å‚¨è®¾å¤‡å›æ”¶æœªä½¿ç”¨çš„ç©ºé—´ã€‚ï¼ˆå‰ªè£éœ€è¦ç›´æ¥è¿æ¥åˆ°è™šæ‹Ÿæœºæˆ– SCSI ç£ç›˜çš„ç‰©ç†ç£ç›˜ä»¥åŠä¸å‰ªè£å…¼å®¹çš„ç¡¬ä»¶ã€‚)  VHD/VHDXçš„ä¼˜ç‚¹   ç»´æŠ¤ç®€å•
 æ“ä½œVHDå°±å’Œæ“ä½œç‰©ç†ç¡¬ç›˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†åŒºã€æ ¼å¼åŒ–ã€å‹ç¼©ã€åˆ é™¤ç­‰ç­‰æ“ä½œï¼Œå¹¶ä¸”è¿™äº›æ“ä½œå¹¶ä¸ä¼šå½±å“ä½ çš„ç‰©ç†åˆ†åŒºã€‚    åŠ è½½è‡ªå¦‚
 VHDç£ç›˜å¯ä»¥è¿›è¡Œåˆ†ç¦»æ“ä½œï¼Œè¿™æ ·åœ¨ç£ç›˜ç®¡ç†ä¸­å°±æ— æ³•æ‰¾åˆ°VHDç£ç›˜åˆ†åŒºã€‚å¦‚æœæƒ³è¦å†æ¬¡æŒ‚è½½ï¼Œåªéœ€å¯¹VHDç£ç›˜æ–‡ä»¶è¿›è¡ŒæŒ‚è½½æ“ä½œå³å¯ã€‚    è½»æ¾å¤‡ä»½
 å¤‡ä»½æ—¶ä»…éœ€è¦å°† .vhd/.vhdx æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯(åŒ…æ‹¬åˆ†åŒºè¡¨ç­‰ä¿¡æ¯)å°±è¢«å¤‡ä»½ä¸‹æ¥äº†ã€‚    è¿ç§»æ–¹ä¾¿
 åªéœ€è¦å°† .vhd/.vhdx æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡è®¡ç®—æœºä¸Šï¼Œå†è¿›è¡Œé™„åŠ æ“ä½œå³å¯å®Œæˆè¿ç§»ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æœåŠ¡å™¨è¿›è¡Œåˆ†å‘ã€‚ä¹Ÿå¯ä»¥åœ¨ç‰©ç†æœºå’Œè™šæ‹Ÿæœºä¹‹é—´è¿›è¡Œè¿ç§»ã€‚    VHDç³»ç»Ÿçš„ç‰¹ç‚¹ å®‰è£…ç®€ä¾¿ VHDç³»ç»Ÿå®‰è£…éå¸¸ç®€å•ï¼Œåˆ°äº†Windows10ç³»ç»Ÿæ›´æ˜¯å¦‚æ­¤ï¼Œç”šè‡³å¯ä»¥ä»åˆ«çš„ç”µè„‘ä¸Šæ‹·ä¸€ä¸ªWindows10çš„VHDæ¥å¯åŠ¨ï¼Œç±»ä¼¼äºå³æ’å³ç”¨ã€‚"><title>ä½¿ç”¨VHDåˆ›å»ºæœ¬åœ°è™šæ‹Ÿç³»ç»Ÿ</title><link rel=canonical href=https://chaosalphard.github.io/p/%E4%BD%BF%E7%94%A8vhd%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E8%99%9A%E6%8B%9F%E7%B3%BB%E7%BB%9F/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="ä½¿ç”¨VHDåˆ›å»ºæœ¬åœ°è™šæ‹Ÿç³»ç»Ÿ"><meta property="og:description" content="VHD/VHDXç®€ä»‹ ä»€ä¹ˆæ˜¯VHD VHD æ˜¯Microsoft Virtual Hard Disk formatï¼ˆå¾®è½¯è™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼‰çš„ç®€ç§°ã€‚å¯ä»¥ç”±Windows Vista/7/8/10ï¼ŒWindows Server 2008R2 ç­‰ç³»ç»Ÿåˆ›å»ºã€‚
ä¸€ä¸ªVHDæ–‡ä»¶å¯ä»¥è¢«è™šæ‹Ÿä¸ºä¸€å—ç¡¬ç›˜ï¼Œå¹¶ä¸”å¯ä»¥åƒæ“ä½œä¸€å—ç¡¬ç›˜ä¸€æ ·æ“ä½œVHDæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šè¯»å–ã€å†™å…¥ã€åˆ›å»ºåˆ†åŒºã€æ ¼å¼åŒ–ç­‰ç­‰ã€‚
ä»€ä¹ˆæ˜¯VHDX éšç€è™šæ‹Ÿç¯å¢ƒçš„ä¼ä¸šå·¥ä½œè´Ÿè·çš„å¢åŠ ä»¥åŠæ€§èƒ½è¦æ±‚çš„æé«˜ï¼Œè™šæ‹Ÿç¡¬ç›˜ (VHD) æ ¼å¼éœ€è¦é€‚åº”è¿™äº›å˜åŒ–ã€‚å› æ­¤ï¼ŒWindows Server 2012 ä¸­çš„ Hyper-V å¼•å…¥äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„VHDæ ¼å¼ï¼Œç§°ä¸ºVHDXã€‚
ä¸æ—§çš„VHDæ ¼å¼ç›¸æ¯”ï¼ŒVHDXå…·æœ‰æ›´å¤§çš„å­˜å‚¨å®¹é‡ã€‚å®ƒä¼˜åŒ–äº†åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜çš„ç»“æ„å¯¹é½æ–¹å¼ï¼Œä»¥é˜²æ­¢åœ¨æ–°çš„å¤§å‹æ‰‡åŒºç‰©ç†ç£ç›˜ä¸Šæ€§èƒ½é™çº§ã€‚åŒæ—¶è¿˜èƒ½åœ¨ç”µæºæ•…éšœæœŸé—´æä¾›æ•°æ®æŸåä¿æŠ¤ã€‚
VHDXæ ¼å¼çš„ä¸»è¦æ–°åŠŸèƒ½å¦‚ä¸‹ï¼š
 æ”¯æŒçš„è™šæ‹Ÿç¡¬ç›˜çš„å­˜å‚¨å®¹é‡é«˜è¾¾ 64 TBã€‚ é€šè¿‡è®°å½•å¯¹VHDXå…ƒæ•°æ®ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥åœ¨ç”µæºå‘ç”Ÿæ•…éšœæ—¶ä¿æŠ¤æ•°æ®ä¸ä¼šè¢«æŸåã€‚ æ”¹è¿›äº†è™šæ‹Ÿç¡¬ç›˜æ ¼å¼çš„å¯¹é½æ–¹å¼ï¼Œå¯åœ¨å¤§å‹æ‰‡åŒºç£ç›˜ä¸Šæ›´å¥½åœ°å·¥ä½œã€‚  VHDX æ ¼å¼è¿˜æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
 åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜æœ‰è¾ƒå¤§çš„æ•°æ®å—å¤§å°ï¼Œå¯è®©è¿™äº›ç£ç›˜æ»¡è¶³å·¥ä½œè´Ÿè·çš„éœ€æ±‚ã€‚ æ‹¥æœ‰4KBçš„é€»è¾‘æ‰‡åŒºï¼Œå¯ä»¥åœ¨ä¸º4KBæ‰‡åŒºè®¾è®¡çš„åº”ç”¨ç¨‹åºå’Œä½œè´Ÿè·ä½¿ç”¨è¯¥ç£ç›˜æ—¶æä¾›è¾ƒé«˜çš„æ€§èƒ½ã€‚ èƒ½å¤Ÿå­˜å‚¨æœ‰å…³ç”¨æˆ·å¯èƒ½æƒ³è®°å½•çš„æ–‡ä»¶çš„è‡ªå®šä¹‰å…ƒæ•°æ®ï¼Œå¦‚æ“ä½œç³»ç»Ÿç‰ˆæœ¬æˆ–åº”ç”¨çš„ä¿®è¡¥ç¨‹åºã€‚ é«˜æ•ˆåœ°è¡¨ç¤ºæ•°æ®ï¼ˆä¹Ÿç§°ä¸ºâ€œå‰ªè£â€ï¼‰ï¼Œä½¿æ–‡ä»¶å¤§å°æ›´å°å¹¶ä¸”å…è®¸åŸºç¡€ç‰©ç†å­˜å‚¨è®¾å¤‡å›æ”¶æœªä½¿ç”¨çš„ç©ºé—´ã€‚ï¼ˆå‰ªè£éœ€è¦ç›´æ¥è¿æ¥åˆ°è™šæ‹Ÿæœºæˆ– SCSI ç£ç›˜çš„ç‰©ç†ç£ç›˜ä»¥åŠä¸å‰ªè£å…¼å®¹çš„ç¡¬ä»¶ã€‚)  VHD/VHDXçš„ä¼˜ç‚¹   ç»´æŠ¤ç®€å•
 æ“ä½œVHDå°±å’Œæ“ä½œç‰©ç†ç¡¬ç›˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†åŒºã€æ ¼å¼åŒ–ã€å‹ç¼©ã€åˆ é™¤ç­‰ç­‰æ“ä½œï¼Œå¹¶ä¸”è¿™äº›æ“ä½œå¹¶ä¸ä¼šå½±å“ä½ çš„ç‰©ç†åˆ†åŒºã€‚    åŠ è½½è‡ªå¦‚
 VHDç£ç›˜å¯ä»¥è¿›è¡Œåˆ†ç¦»æ“ä½œï¼Œè¿™æ ·åœ¨ç£ç›˜ç®¡ç†ä¸­å°±æ— æ³•æ‰¾åˆ°VHDç£ç›˜åˆ†åŒºã€‚å¦‚æœæƒ³è¦å†æ¬¡æŒ‚è½½ï¼Œåªéœ€å¯¹VHDç£ç›˜æ–‡ä»¶è¿›è¡ŒæŒ‚è½½æ“ä½œå³å¯ã€‚    è½»æ¾å¤‡ä»½
 å¤‡ä»½æ—¶ä»…éœ€è¦å°† .vhd/.vhdx æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯(åŒ…æ‹¬åˆ†åŒºè¡¨ç­‰ä¿¡æ¯)å°±è¢«å¤‡ä»½ä¸‹æ¥äº†ã€‚    è¿ç§»æ–¹ä¾¿
 åªéœ€è¦å°† .vhd/.vhdx æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡è®¡ç®—æœºä¸Šï¼Œå†è¿›è¡Œé™„åŠ æ“ä½œå³å¯å®Œæˆè¿ç§»ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æœåŠ¡å™¨è¿›è¡Œåˆ†å‘ã€‚ä¹Ÿå¯ä»¥åœ¨ç‰©ç†æœºå’Œè™šæ‹Ÿæœºä¹‹é—´è¿›è¡Œè¿ç§»ã€‚    VHDç³»ç»Ÿçš„ç‰¹ç‚¹ å®‰è£…ç®€ä¾¿ VHDç³»ç»Ÿå®‰è£…éå¸¸ç®€å•ï¼Œåˆ°äº†Windows10ç³»ç»Ÿæ›´æ˜¯å¦‚æ­¤ï¼Œç”šè‡³å¯ä»¥ä»åˆ«çš„ç”µè„‘ä¸Šæ‹·ä¸€ä¸ªWindows10çš„VHDæ¥å¯åŠ¨ï¼Œç±»ä¼¼äºå³æ’å³ç”¨ã€‚"><meta property="og:url" content="https://chaosalphard.github.io/p/%E4%BD%BF%E7%94%A8vhd%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E8%99%9A%E6%8B%9F%E7%B3%BB%E7%BB%9F/"><meta property="og:site_name" content="Ilirus"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Windows"><meta property="article:published_time" content="2018-05-20T10:30:12+00:00"><meta property="article:modified_time" content="2018-05-20T10:30:12+00:00"><meta name=twitter:title content="ä½¿ç”¨VHDåˆ›å»ºæœ¬åœ°è™šæ‹Ÿç³»ç»Ÿ"><meta name=twitter:description content="VHD/VHDXç®€ä»‹ ä»€ä¹ˆæ˜¯VHD VHD æ˜¯Microsoft Virtual Hard Disk formatï¼ˆå¾®è½¯è™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼‰çš„ç®€ç§°ã€‚å¯ä»¥ç”±Windows Vista/7/8/10ï¼ŒWindows Server 2008R2 ç­‰ç³»ç»Ÿåˆ›å»ºã€‚
ä¸€ä¸ªVHDæ–‡ä»¶å¯ä»¥è¢«è™šæ‹Ÿä¸ºä¸€å—ç¡¬ç›˜ï¼Œå¹¶ä¸”å¯ä»¥åƒæ“ä½œä¸€å—ç¡¬ç›˜ä¸€æ ·æ“ä½œVHDæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šè¯»å–ã€å†™å…¥ã€åˆ›å»ºåˆ†åŒºã€æ ¼å¼åŒ–ç­‰ç­‰ã€‚
ä»€ä¹ˆæ˜¯VHDX éšç€è™šæ‹Ÿç¯å¢ƒçš„ä¼ä¸šå·¥ä½œè´Ÿè·çš„å¢åŠ ä»¥åŠæ€§èƒ½è¦æ±‚çš„æé«˜ï¼Œè™šæ‹Ÿç¡¬ç›˜ (VHD) æ ¼å¼éœ€è¦é€‚åº”è¿™äº›å˜åŒ–ã€‚å› æ­¤ï¼ŒWindows Server 2012 ä¸­çš„ Hyper-V å¼•å…¥äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„VHDæ ¼å¼ï¼Œç§°ä¸ºVHDXã€‚
ä¸æ—§çš„VHDæ ¼å¼ç›¸æ¯”ï¼ŒVHDXå…·æœ‰æ›´å¤§çš„å­˜å‚¨å®¹é‡ã€‚å®ƒä¼˜åŒ–äº†åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜çš„ç»“æ„å¯¹é½æ–¹å¼ï¼Œä»¥é˜²æ­¢åœ¨æ–°çš„å¤§å‹æ‰‡åŒºç‰©ç†ç£ç›˜ä¸Šæ€§èƒ½é™çº§ã€‚åŒæ—¶è¿˜èƒ½åœ¨ç”µæºæ•…éšœæœŸé—´æä¾›æ•°æ®æŸåä¿æŠ¤ã€‚
VHDXæ ¼å¼çš„ä¸»è¦æ–°åŠŸèƒ½å¦‚ä¸‹ï¼š
 æ”¯æŒçš„è™šæ‹Ÿç¡¬ç›˜çš„å­˜å‚¨å®¹é‡é«˜è¾¾ 64 TBã€‚ é€šè¿‡è®°å½•å¯¹VHDXå…ƒæ•°æ®ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥åœ¨ç”µæºå‘ç”Ÿæ•…éšœæ—¶ä¿æŠ¤æ•°æ®ä¸ä¼šè¢«æŸåã€‚ æ”¹è¿›äº†è™šæ‹Ÿç¡¬ç›˜æ ¼å¼çš„å¯¹é½æ–¹å¼ï¼Œå¯åœ¨å¤§å‹æ‰‡åŒºç£ç›˜ä¸Šæ›´å¥½åœ°å·¥ä½œã€‚  VHDX æ ¼å¼è¿˜æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
 åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜æœ‰è¾ƒå¤§çš„æ•°æ®å—å¤§å°ï¼Œå¯è®©è¿™äº›ç£ç›˜æ»¡è¶³å·¥ä½œè´Ÿè·çš„éœ€æ±‚ã€‚ æ‹¥æœ‰4KBçš„é€»è¾‘æ‰‡åŒºï¼Œå¯ä»¥åœ¨ä¸º4KBæ‰‡åŒºè®¾è®¡çš„åº”ç”¨ç¨‹åºå’Œä½œè´Ÿè·ä½¿ç”¨è¯¥ç£ç›˜æ—¶æä¾›è¾ƒé«˜çš„æ€§èƒ½ã€‚ èƒ½å¤Ÿå­˜å‚¨æœ‰å…³ç”¨æˆ·å¯èƒ½æƒ³è®°å½•çš„æ–‡ä»¶çš„è‡ªå®šä¹‰å…ƒæ•°æ®ï¼Œå¦‚æ“ä½œç³»ç»Ÿç‰ˆæœ¬æˆ–åº”ç”¨çš„ä¿®è¡¥ç¨‹åºã€‚ é«˜æ•ˆåœ°è¡¨ç¤ºæ•°æ®ï¼ˆä¹Ÿç§°ä¸ºâ€œå‰ªè£â€ï¼‰ï¼Œä½¿æ–‡ä»¶å¤§å°æ›´å°å¹¶ä¸”å…è®¸åŸºç¡€ç‰©ç†å­˜å‚¨è®¾å¤‡å›æ”¶æœªä½¿ç”¨çš„ç©ºé—´ã€‚ï¼ˆå‰ªè£éœ€è¦ç›´æ¥è¿æ¥åˆ°è™šæ‹Ÿæœºæˆ– SCSI ç£ç›˜çš„ç‰©ç†ç£ç›˜ä»¥åŠä¸å‰ªè£å…¼å®¹çš„ç¡¬ä»¶ã€‚)  VHD/VHDXçš„ä¼˜ç‚¹   ç»´æŠ¤ç®€å•
 æ“ä½œVHDå°±å’Œæ“ä½œç‰©ç†ç¡¬ç›˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†åŒºã€æ ¼å¼åŒ–ã€å‹ç¼©ã€åˆ é™¤ç­‰ç­‰æ“ä½œï¼Œå¹¶ä¸”è¿™äº›æ“ä½œå¹¶ä¸ä¼šå½±å“ä½ çš„ç‰©ç†åˆ†åŒºã€‚    åŠ è½½è‡ªå¦‚
 VHDç£ç›˜å¯ä»¥è¿›è¡Œåˆ†ç¦»æ“ä½œï¼Œè¿™æ ·åœ¨ç£ç›˜ç®¡ç†ä¸­å°±æ— æ³•æ‰¾åˆ°VHDç£ç›˜åˆ†åŒºã€‚å¦‚æœæƒ³è¦å†æ¬¡æŒ‚è½½ï¼Œåªéœ€å¯¹VHDç£ç›˜æ–‡ä»¶è¿›è¡ŒæŒ‚è½½æ“ä½œå³å¯ã€‚    è½»æ¾å¤‡ä»½
 å¤‡ä»½æ—¶ä»…éœ€è¦å°† .vhd/.vhdx æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯(åŒ…æ‹¬åˆ†åŒºè¡¨ç­‰ä¿¡æ¯)å°±è¢«å¤‡ä»½ä¸‹æ¥äº†ã€‚    è¿ç§»æ–¹ä¾¿
 åªéœ€è¦å°† .vhd/.vhdx æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡è®¡ç®—æœºä¸Šï¼Œå†è¿›è¡Œé™„åŠ æ“ä½œå³å¯å®Œæˆè¿ç§»ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æœåŠ¡å™¨è¿›è¡Œåˆ†å‘ã€‚ä¹Ÿå¯ä»¥åœ¨ç‰©ç†æœºå’Œè™šæ‹Ÿæœºä¹‹é—´è¿›è¡Œè¿ç§»ã€‚    VHDç³»ç»Ÿçš„ç‰¹ç‚¹ å®‰è£…ç®€ä¾¿ VHDç³»ç»Ÿå®‰è£…éå¸¸ç®€å•ï¼Œåˆ°äº†Windows10ç³»ç»Ÿæ›´æ˜¯å¦‚æ­¤ï¼Œç”šè‡³å¯ä»¥ä»åˆ«çš„ç”µè„‘ä¸Šæ‹·ä¸€ä¸ªWindows10çš„VHDæ¥å¯åŠ¨ï¼Œç±»ä¼¼äºå³æ’å³ç”¨ã€‚"></head><body><script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.body.dataset.scheme='dark':document.body.dataset.scheme='light'})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hu3efe4cd0dfb29873d1b0d65561d00585_584028_300x0_resize_box_2.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸŒŒ</span></figure><h1 class=site-name><a href=https://chaosalphard.github.io>Ilirus</a></h1><h2 class=site-description>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://chaosalphard.github.io class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E5%85%B6%E4%BB%96/>å…¶ä»–</a></header><h2 class=article-title><a href=/p/%E4%BD%BF%E7%94%A8vhd%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E8%99%9A%E6%8B%9F%E7%B3%BB%E7%BB%9F/>ä½¿ç”¨VHDåˆ›å»ºæœ¬åœ°è™šæ‹Ÿç³»ç»Ÿ</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>May 20, 2018</time></footer></div></header><section class=article-content><h1 id=vhdvhdxç®€ä»‹>VHD/VHDXç®€ä»‹</h1><h2 id=ä»€ä¹ˆæ˜¯vhd>ä»€ä¹ˆæ˜¯VHD</h2><p>VHD æ˜¯Microsoft Virtual Hard Disk formatï¼ˆå¾®è½¯è™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼‰çš„ç®€ç§°ã€‚å¯ä»¥ç”±Windows Vista/7/8/10ï¼ŒWindows Server 2008R2 ç­‰ç³»ç»Ÿåˆ›å»ºã€‚<br>ä¸€ä¸ªVHDæ–‡ä»¶å¯ä»¥è¢«è™šæ‹Ÿä¸ºä¸€å—ç¡¬ç›˜ï¼Œå¹¶ä¸”å¯ä»¥åƒæ“ä½œä¸€å—ç¡¬ç›˜ä¸€æ ·æ“ä½œVHDæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šè¯»å–ã€å†™å…¥ã€åˆ›å»ºåˆ†åŒºã€æ ¼å¼åŒ–ç­‰ç­‰ã€‚</p><h2 id=ä»€ä¹ˆæ˜¯vhdx>ä»€ä¹ˆæ˜¯VHDX</h2><p>éšç€è™šæ‹Ÿç¯å¢ƒçš„ä¼ä¸šå·¥ä½œè´Ÿè·çš„å¢åŠ ä»¥åŠæ€§èƒ½è¦æ±‚çš„æé«˜ï¼Œè™šæ‹Ÿç¡¬ç›˜ (VHD) æ ¼å¼éœ€è¦é€‚åº”è¿™äº›å˜åŒ–ã€‚å› æ­¤ï¼ŒWindows Server 2012 ä¸­çš„ Hyper-V å¼•å…¥äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„VHDæ ¼å¼ï¼Œç§°ä¸ºVHDXã€‚<br>ä¸æ—§çš„VHDæ ¼å¼ç›¸æ¯”ï¼ŒVHDXå…·æœ‰æ›´å¤§çš„å­˜å‚¨å®¹é‡ã€‚å®ƒä¼˜åŒ–äº†åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜çš„ç»“æ„å¯¹é½æ–¹å¼ï¼Œä»¥é˜²æ­¢åœ¨æ–°çš„å¤§å‹æ‰‡åŒºç‰©ç†ç£ç›˜ä¸Šæ€§èƒ½é™çº§ã€‚åŒæ—¶è¿˜èƒ½åœ¨ç”µæºæ•…éšœæœŸé—´æä¾›æ•°æ®æŸåä¿æŠ¤ã€‚</p><p>VHDXæ ¼å¼çš„ä¸»è¦æ–°åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>æ”¯æŒçš„è™šæ‹Ÿç¡¬ç›˜çš„å­˜å‚¨å®¹é‡é«˜è¾¾ 64 TBã€‚</li><li>é€šè¿‡è®°å½•å¯¹VHDXå…ƒæ•°æ®ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥åœ¨ç”µæºå‘ç”Ÿæ•…éšœæ—¶ä¿æŠ¤æ•°æ®ä¸ä¼šè¢«æŸåã€‚</li><li>æ”¹è¿›äº†è™šæ‹Ÿç¡¬ç›˜æ ¼å¼çš„å¯¹é½æ–¹å¼ï¼Œå¯åœ¨å¤§å‹æ‰‡åŒºç£ç›˜ä¸Šæ›´å¥½åœ°å·¥ä½œã€‚</li></ul><p>VHDX æ ¼å¼è¿˜æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>åŠ¨æ€ç£ç›˜å’Œå·®å¼‚ç£ç›˜æœ‰è¾ƒå¤§çš„æ•°æ®å—å¤§å°ï¼Œå¯è®©è¿™äº›ç£ç›˜æ»¡è¶³å·¥ä½œè´Ÿè·çš„éœ€æ±‚ã€‚</li><li>æ‹¥æœ‰4KBçš„é€»è¾‘æ‰‡åŒºï¼Œå¯ä»¥åœ¨ä¸º4KBæ‰‡åŒºè®¾è®¡çš„åº”ç”¨ç¨‹åºå’Œä½œè´Ÿè·ä½¿ç”¨è¯¥ç£ç›˜æ—¶æä¾›è¾ƒé«˜çš„æ€§èƒ½ã€‚</li><li>èƒ½å¤Ÿå­˜å‚¨æœ‰å…³ç”¨æˆ·å¯èƒ½æƒ³è®°å½•çš„æ–‡ä»¶çš„è‡ªå®šä¹‰å…ƒæ•°æ®ï¼Œå¦‚æ“ä½œç³»ç»Ÿç‰ˆæœ¬æˆ–åº”ç”¨çš„ä¿®è¡¥ç¨‹åºã€‚</li><li>é«˜æ•ˆåœ°è¡¨ç¤ºæ•°æ®ï¼ˆä¹Ÿç§°ä¸ºâ€œå‰ªè£â€ï¼‰ï¼Œä½¿æ–‡ä»¶å¤§å°æ›´å°å¹¶ä¸”å…è®¸åŸºç¡€ç‰©ç†å­˜å‚¨è®¾å¤‡å›æ”¶æœªä½¿ç”¨çš„ç©ºé—´ã€‚ï¼ˆå‰ªè£éœ€è¦ç›´æ¥è¿æ¥åˆ°è™šæ‹Ÿæœºæˆ– SCSI ç£ç›˜çš„ç‰©ç†ç£ç›˜ä»¥åŠä¸å‰ªè£å…¼å®¹çš„ç¡¬ä»¶ã€‚)</li></ul><h2 id=vhdvhdxçš„ä¼˜ç‚¹>VHD/VHDXçš„ä¼˜ç‚¹</h2><ul><li><p>ç»´æŠ¤ç®€å•</p><ul><li>æ“ä½œVHDå°±å’Œæ“ä½œç‰©ç†ç¡¬ç›˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œåˆ†åŒºã€æ ¼å¼åŒ–ã€å‹ç¼©ã€åˆ é™¤ç­‰ç­‰æ“ä½œï¼Œå¹¶ä¸”è¿™äº›æ“ä½œå¹¶ä¸ä¼šå½±å“ä½ çš„ç‰©ç†åˆ†åŒºã€‚</li></ul></li><li><p>åŠ è½½è‡ªå¦‚</p><ul><li>VHDç£ç›˜å¯ä»¥è¿›è¡Œåˆ†ç¦»æ“ä½œï¼Œè¿™æ ·åœ¨ç£ç›˜ç®¡ç†ä¸­å°±æ— æ³•æ‰¾åˆ°VHDç£ç›˜åˆ†åŒºã€‚å¦‚æœæƒ³è¦å†æ¬¡æŒ‚è½½ï¼Œåªéœ€å¯¹VHDç£ç›˜æ–‡ä»¶è¿›è¡ŒæŒ‚è½½æ“ä½œå³å¯ã€‚</li></ul></li><li><p>è½»æ¾å¤‡ä»½</p><ul><li>å¤‡ä»½æ—¶ä»…éœ€è¦å°† .vhd/.vhdx æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæ–‡ä»¶ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯(åŒ…æ‹¬åˆ†åŒºè¡¨ç­‰ä¿¡æ¯)å°±è¢«å¤‡ä»½ä¸‹æ¥äº†ã€‚</li></ul></li><li><p>è¿ç§»æ–¹ä¾¿</p><ul><li>åªéœ€è¦å°† .vhd/.vhdx æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡è®¡ç®—æœºä¸Šï¼Œå†è¿›è¡Œé™„åŠ æ“ä½œå³å¯å®Œæˆè¿ç§»ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æœåŠ¡å™¨è¿›è¡Œåˆ†å‘ã€‚ä¹Ÿå¯ä»¥åœ¨ç‰©ç†æœºå’Œè™šæ‹Ÿæœºä¹‹é—´è¿›è¡Œè¿ç§»ã€‚</li></ul></li></ul><h1 id=vhdç³»ç»Ÿçš„ç‰¹ç‚¹>VHDç³»ç»Ÿçš„ç‰¹ç‚¹</h1><h2 id=å®‰è£…ç®€ä¾¿>å®‰è£…ç®€ä¾¿</h2><p>VHDç³»ç»Ÿå®‰è£…éå¸¸ç®€å•ï¼Œåˆ°äº†Windows10ç³»ç»Ÿæ›´æ˜¯å¦‚æ­¤ï¼Œç”šè‡³å¯ä»¥ä»åˆ«çš„ç”µè„‘ä¸Šæ‹·ä¸€ä¸ªWindows10çš„VHDæ¥å¯åŠ¨ï¼Œç±»ä¼¼äºå³æ’å³ç”¨ã€‚</p><h2 id=æ€§èƒ½å¼ºåŠ²>æ€§èƒ½å¼ºåŠ²</h2><p>VHDç³»ç»Ÿå¦‚åŒçœŸå®çš„ç³»ç»Ÿä¸€æ ·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è®¡ç®—æœºçš„ç‰©ç†ç¡¬ä»¶ï¼Œæ€§èƒ½ä¸çœŸå®ç³»ç»Ÿç›¸å·®æ— å‡ ï¼Œè¿™ä¸è™šæ‹Ÿæœºæœ‰æ˜æ˜¾çš„å·®åˆ«ã€‚è™šæ‹Ÿæœºä½¿ç”¨è™šæ‹Ÿå‡ºæ¥çš„ç¡¬ä»¶ï¼ŒVHDç³»ç»Ÿç›´æ¥ä½¿ç”¨ç‰©ç†ç¡¬ä»¶ã€‚</p><h2 id=å¤‡ä»½æ–¹ä¾¿>å¤‡ä»½æ–¹ä¾¿</h2><p>ç›´æ¥å°† .vhd/.vhdx æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œå°±å®Œæˆäº†å¤‡ä»½å·¥ä½œã€‚<br>æ­¤å¤–ï¼ŒVHDè¿˜æä¾›äº†æ›´ä¸ºæ–¹ä¾¿çš„å¤‡ä»½æŠ€æœ¯â€”â€”â€œå·®åˆ†ç£ç›˜â€ã€‚ä½¿ç”¨å·®åˆ†ç£ç›˜ï¼Œå³å¯å®ç°ç³»ç»Ÿçš„â€œç§’å¤‡ä»½â€ï¼Œâ€œç§’è¿˜åŸâ€ã€‚</p><h2 id=åˆ é™¤æ–¹ä¾¿>åˆ é™¤æ–¹ä¾¿</h2><p>å½“ä½ ä¸æƒ³ä½¿ç”¨VHDç³»ç»Ÿæ—¶ï¼Œåªéœ€è¦å°†å¯¹åº”çš„ .vhd/.vhdx æ–‡ä»¶åˆ é™¤ï¼Œå†å°†å¯¹åº”çš„å¼•å¯¼æ¡ç›®åˆ é™¤å³å¯ã€‚</p><h1 id=å¦‚ä½•éƒ¨ç½²vhdç³»ç»Ÿ>å¦‚ä½•éƒ¨ç½²VHDç³»ç»Ÿ</h1><p>å¦‚æœä½ ä»ç½‘ç»œä¸Šæˆ–è€…ä½ æœ‹å‹é‚£é‡Œè·å¾—äº†éƒ¨ç½²æœ‰Windows10ç³»ç»Ÿçš„vhd/vhdxæ–‡ä»¶ï¼Œåªéœ€å°†å…¶æ‹·å…¥ä½ çš„è®¡ç®—æœºï¼Œç„¶åæ·»åŠ å¼•å¯¼é¡¹å³å¯å®ŒæˆVHDç³»ç»Ÿçš„éƒ¨ç½²ã€‚</p><p>å¦‚æœæ²¡æœ‰ä¹Ÿæ²¡å…³ç³»ï¼Œä¸‹é¢å°†ä¼šä»‹ç»å¦‚ä½•ä»é›¶å¼€å§‹éƒ¨ç½²VHDç³»ç»Ÿ</p><h2 id=åˆ›å»ºvhdvhdxæ–‡ä»¶>åˆ›å»ºVHD/VHDXæ–‡ä»¶</h2><p><strong>ä»¥ä¸‹å‘½ä»¤å‡åœ¨Windows10ç¯å¢ƒä¸‹è¿›è¡Œï¼ŒWindows7å¯èƒ½ç•¥æœ‰ä¸åŒ</strong></p><p>ä½¿ç”¨Windowsç£ç›˜ç®¡ç†åˆ›å»º</p><p>åˆ›å»ºvhdxæ–‡ä»¶<br><img src=https://s2.ax1x.com/2019/06/16/V7kaxH.jpg alt></p><p>è®¾ç½®å¤§å°<br><img src=https://s2.ax1x.com/2019/06/16/V7kwMd.jpg alt></p><p>åˆå§‹åŒ–ç£ç›˜ï¼ŒGPTè¿˜æ˜¯MBRçœ‹ä¸ªäººæƒ…å†µï¼Œæ¨èé€‰GPTæ ¼å¼<br><img src=https://s2.ax1x.com/2019/06/16/V7k0sA.jpg alt></p><p>æ–°å»ºåˆ†åŒº<br><img src=https://s2.ax1x.com/2019/06/16/V7kBqI.jpg alt></p><p>å®Œæˆ</p><p>ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»º</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1>#å¯åŠ¨diskpartå·¥å…·</span>
diskpart

<span class=c1>#åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º25600MBçš„å›ºå®šå¤§å°çš„vhdxæ–‡ä»¶</span>
<span class=c1>#å¦‚æœæƒ³åˆ›å»ºåŠ¨æ€æ‹“å±•å¤§å°çš„vhdxæ–‡ä»¶ï¼Œæ¢æˆtype=expandableå³å¯</span>
create vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\v</span>hd.vhdx <span class=nv>maximum</span><span class=o>=</span><span class=m>25600</span> <span class=nv>type</span><span class=o>=</span>fixed

<span class=c1>#é€‰ä¸­åˆšæ‰åˆ›å»ºçš„vhdxæ–‡ä»¶</span>
<span class=k>select</span> vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\v</span>hd.vhdx

<span class=c1>#æŒ‚è½½ç¡¬ç›˜</span>
attach vdisk

<span class=c1>#åˆ›å»ºä¸»åˆ†åŒº</span>
create partition primary

<span class=c1>#è®¾ç½®å·æ ‡</span>
assign <span class=nv>letter</span><span class=o>=</span>V

<span class=c1>#æ ¼å¼åŒ–åˆ†åŒº</span>
format quick <span class=nv>label</span><span class=o>=</span>vhdx

<span class=nb>exit</span>
</code></pre></div><p>å®Œæˆ</p><h2 id=éƒ¨ç½²windowsç³»ç»Ÿåˆ°vhdè™šæ‹Ÿç£ç›˜>éƒ¨ç½²Windowsç³»ç»Ÿåˆ°VHDè™šæ‹Ÿç£ç›˜</h2><p><strong>é¦–å…ˆå°†vhdxæ–‡ä»¶æŒ‚è½½åˆ°ç³»ç»Ÿä¸Šï¼Œå¦‚æœå·²æŒ‚è½½åˆ™å¯è·³è¿‡è¿™ä¸€æ­¥</strong></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>diskpart

<span class=k>select</span> vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\v</span>hd.vhdx

attach vdisk

<span class=nb>exit</span>
</code></pre></div><p><strong>å°†ç³»ç»Ÿéƒ¨ç½²åˆ°vhdxæ–‡ä»¶ä¸­</strong></p><p>ä¸‹è½½.isoé•œåƒæ–‡ä»¶æˆ–è€….wimæ˜ åƒæ–‡ä»¶ã€‚<br>å¦‚æœæ˜¯.isoé•œåƒæ–‡ä»¶åˆ™å°†å…¶è§£å‹æˆ–è€…æŒ‚è½½åˆ°è™šæ‹Ÿå…‰é©±ã€‚</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1>#è·å¾—é•œåƒä¿¡æ¯</span>
Dism /Get-ImageInfo /imagefile:D:<span class=se>\W</span>indows10<span class=se>\s</span>ources<span class=se>\i</span>nstall.wim

<span class=c1>#éƒ¨ç½²é•œåƒåˆ°vhdxä¸­</span>
Dism /apply-image /imagefile:D:<span class=se>\W</span>indows10<span class=se>\s</span>ources<span class=se>\i</span>nstall.wim /index:1 /ApplyDir:V:<span class=se>\
</span></code></pre></div><p>ç­‰å¾…éƒ¨ç½²å®Œæˆ</p><p>å‚æ•°è§£é‡Šï¼š<br>imagefile: install.wimæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®<br>index: ç³»ç»Ÿç‰ˆæœ¬æ‰€å¯¹åº”çš„ç´¢å¼•è·¯å¾„<br>ApplyDir: è¦éƒ¨ç½²é•œåƒçš„é©±åŠ¨å™¨ç›˜ç¬¦</p><h2 id=æ·»åŠ å¼•å¯¼é¡¹>æ·»åŠ å¼•å¯¼é¡¹</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1>#å°†Vç›˜çš„ç³»ç»Ÿæ·»åŠ åˆ°å¼•å¯¼é¡¹ï¼ŒVå³ä¸ºä½ vhdè™šæ‹Ÿç£ç›˜çš„ç›˜ç¬¦</span>
bcdboot V:<span class=se>\W</span>indows /l zh-CN /d
</code></pre></div><p>å¦‚æœä½ æ˜¯åœ¨PEä¸‹è¿›è¡Œçš„ï¼Œåˆ™éœ€è¦ä¸ºESPåˆ†åŒºåˆ†é…ç›˜ç¬¦</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>bcdboot V:<span class=se>\W</span>indows /s Z: /f uefi /l zh-cn /d
</code></pre></div><p>å‚æ•°è§£é‡Šï¼š<br>/l: è¯­è¨€<br>/s: è¦å°†å¼•å¯¼æ–‡ä»¶å¤åˆ¶åˆ°çš„ç£ç›˜çš„ç›˜ç¬¦ï¼Œé€šå¸¸æ˜¯ESPåˆ†åŒºæ‰€åœ¨ä½ç½®<br>/f: å¼•å¯¼æ–¹å¼<br>/d: ä¿ç•™ç°åœ¨çš„é»˜è®¤å¯åŠ¨æ¡ç›®</p><p>ä½¿ç”¨bcdeditæŒ‡ä»¤æ¥æŸ¥çœ‹å¼•å¯¼é¡¹ï¼Œæˆ–è€…ç”¨msconfigæ¥æŸ¥çœ‹å¼•å¯¼é¡¹ã€‚</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=se>\&gt;</span>bcdedit

Windows å¯åŠ¨ç®¡ç†å™¨
--------------------
æ ‡è¯†ç¬¦                  <span class=o>{</span>bootmgr<span class=o>}</span>
device                  <span class=nv>partition</span><span class=o>=</span><span class=se>\D</span>evice<span class=se>\H</span>arddiskVolume1
path                    <span class=se>\E</span>FI<span class=se>\M</span>icrosoft<span class=se>\B</span>oot<span class=se>\b</span>ootmgfw.efi
description             Windows Boot Manager
locale                  zh-CN
inherit                 <span class=o>{</span>globalsettings<span class=o>}</span>
default                 <span class=o>{</span>default<span class=o>}</span>
resumeobject            <span class=o>{</span>3fa12b79-202e-11e8-8e30-ddc8fe2935d0<span class=o>}</span>
displayorder            <span class=o>{</span>default<span class=o>}</span>
                        <span class=o>{</span>current<span class=o>}</span>
toolsdisplayorder       <span class=o>{</span>memdiag<span class=o>}</span>
timeout                 <span class=m>5</span>

Windows å¯åŠ¨åŠ è½½å™¨
-------------------
æ ‡è¯†ç¬¦                  <span class=o>{</span>current<span class=o>}</span>
device                  <span class=nv>partition</span><span class=o>=</span>C:
path                    <span class=se>\W</span>indows<span class=se>\s</span>ystem32<span class=se>\w</span>inload.efi
description             SSD Win10
locale                  zh-CN
inherit                 <span class=o>{</span>bootloadersettings<span class=o>}</span>
recoverysequence        <span class=o>{</span>3fa12b6f-202e-11e8-8e30-ddc8fe2935d0<span class=o>}</span>
recoveryenabled         Yes
isolatedcontext         Yes
allowedinmemorysettings 0x15000075
osdevice                <span class=nv>partition</span><span class=o>=</span>C:
systemroot              <span class=se>\W</span>indows
resumeobject            <span class=o>{</span>3fa12b79-202e-11e8-8e30-ddc8fe2935d0<span class=o>}</span>
nx                      OptIn
bootmenupolicy          Standard

Windows å¯åŠ¨åŠ è½½å™¨
-------------------
æ ‡è¯†ç¬¦                  <span class=o>{</span>3fa12b75-202e-11e8-8e30-ddc8fe2935d0<span class=o>}</span>
device                  <span class=nv>partition</span><span class=o>=</span>E:
path                    <span class=se>\W</span>indows<span class=se>\s</span>ystem32<span class=se>\w</span>inload.efi
description             Virtual Win10
locale                  zh-CN
inherit                 <span class=o>{</span>bootloadersettings<span class=o>}</span>
isolatedcontext         Yes
allowedinmemorysettings 0x15000075
osdevice                <span class=nv>partition</span><span class=o>=</span>E:
systemroot              <span class=se>\W</span>indows
resumeobject            <span class=o>{</span>3fa12b75-202e-11e8-8e30-ddc8fe2935d0<span class=o>}</span>
nx                      OptIn
bootmenupolicy          Standard
</code></pre></div><p>ä½¿ç”¨<code>bcdedit /set</code>æŒ‡ä»¤æ¥ä¸ºå¯åŠ¨é¡¹å‘½å</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1>#bcdedit /set {æ ‡è¯†ç¬¦} description &#34;è¦æ›´æ”¹çš„å¯åŠ¨é¡¹åç§°&#34;</span>
bcdedit /set <span class=o>{</span>3fa12b75-202e-11e8-8e30-ddc8fe2935d0<span class=o>}</span> description <span class=s2>&#34;VW10&#34;</span>
</code></pre></div><p>å–æ¶ˆæŒ‚è½½ï¼Œé‡å¯ç”µè„‘ï¼Œå¼•å¯¼è¿›å…¥VHDç³»ç»Ÿå³å¯</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>diskpart

<span class=k>select</span> vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\v</span>hd.vhdx

detach vdisk

<span class=nb>exit</span>
</code></pre></div><h1 id=ä½¿ç”¨å·®åˆ†ç£ç›˜è¿›è¡Œå¤‡ä»½å’Œè¿˜åŸ>ä½¿ç”¨å·®åˆ†ç£ç›˜è¿›è¡Œå¤‡ä»½å’Œè¿˜åŸ</h1><h2 id=å·®åˆ†ç£ç›˜å¦‚ä½•å®ç°ç§’å¤‡ä»½ç§’è¿˜åŸ>å·®åˆ†ç£ç›˜å¦‚ä½•å®ç°â€œç§’å¤‡ä»½â€ï¼Œâ€œç§’è¿˜åŸâ€</h2><p>å·®åˆ†ç£ç›˜æ˜¯æŒ‡åŸºäºçˆ¶ç›˜çš„å­ç›˜ï¼Œå­ç›˜èƒ½è¯»å–çˆ¶ç›˜çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒæ—¶å¯¹å­ç›˜çš„æ‰€æœ‰æ”¹åŠ¨ä¸ä¼šå½±å“åˆ°çˆ¶ç›˜ã€‚<br>å› æ­¤ï¼Œä¸€æ—¦å»ºç«‹äº†å­ç›˜ï¼Œå°±ç›¸å½“äºä¸ºçˆ¶ç›˜å»ºç«‹äº†ä¸€ä¸ªè¿˜åŸç‚¹ï¼Œç”±äºå­ç›˜è‡ªèº«ä¸å¸¦æ•°æ®ï¼Œæ‰€ä»¥åˆ›å»ºéå¸¸å¿«ï¼Œå¤§å°éå¸¸å°(4MBå·¦å³)ï¼Œå­ç›˜çš„å¤§å°ä¼šéšç€å­ç›˜çš„ä½¿ç”¨é€æ¸å¢å¤§ã€‚<br>åŒæ—¶ï¼Œå¦‚æœæƒ³è¦è¿˜åŸï¼Œåªéœ€è¦å†æ¬¡ä¸ºçˆ¶ç›˜åˆ›å»ºä¸€ä¸ªå­ç›˜å³å¯ï¼ŒåŸæ¥çš„å­ç›˜åŒæ ·å¯ä»¥ä½¿ç”¨æˆ–åˆ é™¤ã€‚</p><p>åŸºäºæ­¤ï¼Œä½¿ç”¨å·®åˆ†ç£ç›˜å¯ä»¥ä½¿ç”¨æœ€å°‘çš„ç©ºé—´ï¼Œåˆ›å»ºå¤šä¸ªç³»ç»Ÿï¼Œä¾›ä¸åŒçš„äººä½¿ç”¨ã€‚å¹¶ä¸”å¤‡ä»½å’Œè¿˜åŸå¯¹ç¡¬ç›˜çš„æŸä¼¤ä¹Ÿé™åˆ°äº†æœ€ä½ã€‚</p><p><strong>åˆ›å»ºå·®åˆ†ç£ç›˜</strong></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>diskpart
create vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\V</span>Disk<span class=se>\c</span>hild01.vhdx <span class=nv>parent</span><span class=o>=</span>E:<span class=se>\V</span>Disk<span class=se>\v</span>hd.vhdx
<span class=nb>exit</span>
</code></pre></div><p>å‚æ•°è§£é‡Šï¼š<br>file: åˆ›å»ºçš„å­ç›˜çš„ä½ç½®å’Œåç§°<br>parent: çˆ¶ç›˜çš„ä½ç½®</p><p><strong>å°†å­ç›˜æ·»åŠ åˆ°å¯åŠ¨é¡¹</strong></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>diskpart
<span class=k>select</span> vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\V</span>Disk<span class=se>\c</span>hild01.vhdx
attach vdisk
<span class=nb>exit</span>
bcdboot V:<span class=se>\W</span>indows /l zh-CN /d
</code></pre></div><p>å­ç›˜çš„å¯åŠ¨é¡¹åç§°åŒæ ·å¯ä»¥é€šè¿‡<code>bcdedit /set</code>æŒ‡ä»¤æ›´æ”¹ã€‚</p><p>ç”±äºå­ç›˜æ˜¯åŸºäºçˆ¶ç›˜çš„æ•°æ®åˆ›å»ºçš„ï¼Œåˆ›å»ºå®Œæ¯•çš„å­ç›˜å’Œçˆ¶ç›˜çš„æ•°æ®æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä½†æ˜¯çˆ¶ç›˜å†…çš„æ•°æ®å°±æ— æ³•ä¿®æ”¹ï¼Œå¦åˆ™ä¼šå¯¼è‡´å­ç›˜æ•°æ®é”™è¯¯ï¼Œæ— æ³•æ‰“å¼€ã€‚<br>å› æ­¤ï¼Œå°†çˆ¶ç›˜çš„vhdxæ–‡ä»¶è®¾ä¸ºâ€œåªè¯»â€å±æ€§ï¼ŒåŒæ—¶åœ¨Win+Rçš„è¿è¡Œæ¡†ä¸­è¾“å…¥msconfigï¼Œè¿›å…¥å¯åŠ¨é¡¹ç®¡ç†ï¼Œå°†çˆ¶ç›˜çš„å¯åŠ¨é¡¹åˆ é™¤ã€‚</p><p>ä»¥åè¿›è¡Œè¿˜åŸæ“ä½œæ—¶ï¼Œåªéœ€è¦å°†åŸæœ¬çš„å­ç›˜åˆ é™¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å­ç›˜ï¼Œå†å°†å…¶æ·»åŠ åˆ°å¯åŠ¨é¡¹å³å¯ã€‚ä½ ä¹Ÿå¯ä»¥å°†æŒ‡ä»¤å†™ä¸ºbatæ‰¹å¤„ç†ï¼ŒåŒå‡»æ‰§è¡Œã€‚</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>del E:<span class=se>\V</span>Disk<span class=se>\c</span>hild01.vhdx
diskpart
    create vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\V</span>Disk<span class=se>\c</span>hild01.vhdx <span class=nv>parent</span><span class=o>=</span>E:<span class=se>\V</span>Disk<span class=se>\v</span>hd.vhdx
    <span class=k>select</span> vdisk <span class=nv>file</span><span class=o>=</span>E:<span class=se>\V</span>Disk<span class=se>\c</span>hild01.vhdx
    attach vdisk
<span class=nb>exit</span>
bcdboot V:<span class=se>\W</span>indows /l zh-CN /d
</code></pre></div></section><footer class=article-footer><section class=article-tags><a href=/tags/windows/>Windows</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-contents><div class="flex article-list--tile"><article><a href=/p/%E5%9C%A8windows%E7%9A%84uac%E6%8E%88%E6%9D%83%E4%B8%AD%E5%A2%9E%E5%8A%A0%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81/><div class=article-details><h2 class=article-title>åœ¨Windowsçš„UACæˆæƒä¸­å¢åŠ å¯†ç éªŒè¯</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//hugo-theme-stack.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener('onColorSchemeChange',a=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2021 Ilirus</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script></body></html>